{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { Subject } from 'rxjs';\nlet HomeComponent = class HomeComponent {\n  get Refresh() {\n    return this._refresh$;\n  }\n  constructor(auth, api, fb) {\n    this.auth = auth;\n    this.api = api;\n    this.fb = fb;\n    this.shortenedUrls = [];\n    this.displayedColumns = ['LongUrl', 'Shortened', 'Action'];\n    this._refresh$ = new Subject();\n  }\n  ngOnInit() {\n    this.api.Refresh$.subscribe(() => {\n      this.getUrls();\n    });\n    this.getUrls();\n    this.createUrlForm = this.fb.group({\n      url: ['', Validators.required]\n    });\n  }\n  getUrls() {\n    this.api.getShortenedUrls().subscribe(res => {\n      this.shortenedUrls = res;\n      this.dataSource = new MatTableDataSource(this.shortenedUrls);\n      this.dataSource.paginator = this.paginator;\n    });\n  }\n  logOut() {\n    this.auth.signOut();\n  }\n  addNewUrl() {\n    this.api.addUrl(this.createUrlForm.value);\n  }\n};\n__decorate([ViewChild(MatPaginator)], HomeComponent.prototype, \"paginator\", void 0);\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAUC,SAAS,QAAQ,eAAe;AAC5D,SAAiCC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,YAAY,QAAQ,6BAA6B;AAC1D,SAASC,kBAAkB,QAAQ,yBAAyB;AAC5D,SAASC,OAAO,QAAuB,MAAM;AAWtC,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAaxB,IAAIC,OAAO;IACT,OAAO,IAAI,CAACC,SAAS;EACvB;EAEAC,YAAoBC,IAAiB,EAAUC,GAAe,EAAUC,EAAe;IAAnE,SAAI,GAAJF,IAAI;IAAuB,QAAG,GAAHC,GAAG;IAAsB,OAAE,GAAFC,EAAE;IAbnE,kBAAa,GAAQ,EAAE;IAE9B,qBAAgB,GAAa,CAAC,SAAS,EAAE,WAAW,EAAE,QAAQ,CAAC;IAKvD,cAAS,GAAG,IAAIP,OAAa;EAMqD;EAE1FQ,QAAQ;IAEJ,IAAI,CAACF,GAAG,CAACG,QAAQ,CAACC,SAAS,CAAC,MAAK;MAC/B,IAAI,CAACC,OAAO,EAAE;IAChB,CAAC,CAAC;IAEF,IAAI,CAACA,OAAO,EAAE;IAEd,IAAI,CAACC,aAAa,GAAG,IAAI,CAACL,EAAE,CAACM,KAAK,CAAC;MACjCC,GAAG,EAAE,CAAC,EAAE,EAAEjB,UAAU,CAACkB,QAAQ;KAC9B,CAAC;EACN;EAEQJ,OAAO;IACb,IAAI,CAACL,GAAG,CAACU,gBAAgB,EAAE,CAC1BN,SAAS,CAACO,GAAG,IAAG;MAEb,IAAI,CAACC,aAAa,GAAGD,GAAG;MACxB,IAAI,CAACE,UAAU,GAAG,IAAIpB,kBAAkB,CAAC,IAAI,CAACmB,aAAa,CAAC;MAC5D,IAAI,CAACC,UAAU,CAACC,SAAS,GAAG,IAAI,CAACA,SAAS;IAC5C,CAAC,CAAC;EACN;EAEAC,MAAM;IACJ,IAAI,CAAChB,IAAI,CAACiB,OAAO,EAAE;EACrB;EAEAC,SAAS;IACP,IAAI,CAACjB,GAAG,CAACkB,MAAM,CAAC,IAAI,CAACZ,aAAa,CAACa,KAAK,CAAC;EAC3C;CACD;AA/C0BC,YAAxB9B,SAAS,CAACE,YAAY,CAAC,gDAA2B;AAFxCG,aAAa,eANzBN,SAAS,CAAC;EACTgC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,GAEW5B,aAAa,CAiDzB;SAjDYA,aAAa","names":["Component","ViewChild","Validators","MatPaginator","MatTableDataSource","Subject","HomeComponent","Refresh","_refresh$","constructor","auth","api","fb","ngOnInit","Refresh$","subscribe","getUrls","createUrlForm","group","url","required","getShortenedUrls","res","shortenedUrls","dataSource","paginator","logOut","signOut","addNewUrl","addUrl","value","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["F:\\UrlShortnerApi\\UI\\UrlShortnerUI\\src\\app\\components\\home\\home.component.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { Subject,Observable,tap } from 'rxjs';\nimport { ShortenedUrls } from 'src/app/models/ShortenedUrl';\nimport { ApiService } from 'src/app/services/api.service';\nimport { AuthService } from 'src/app/services/auth.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\n\nexport class HomeComponent implements OnInit {\n\n  @ViewChild(MatPaginator) paginator !: MatPaginator;\n\n  public shortenedUrls: any = [];\n  public observable$: any;\n  displayedColumns: string[] = ['LongUrl', 'Shortened', 'Action'];\n  dataSource: any;\n\n  createUrlForm!: FormGroup;\n\n  private _refresh$ = new Subject<void>;\n\n  get Refresh(){\n    return this._refresh$;\n  }\n\n  constructor(private auth: AuthService, private api: ApiService, private fb: FormBuilder) {}\n\n  ngOnInit(): void {\n\n      this.api.Refresh$.subscribe(() => {\n        this.getUrls()\n      })\n\n      this.getUrls()\n\n      this.createUrlForm = this.fb.group({\n        url: ['', Validators.required],\n      });\n  }\n\n  private getUrls(){\n    this.api.getShortenedUrls()\n    .subscribe(res =>\n      {\n        this.shortenedUrls = res;\n        this.dataSource = new MatTableDataSource(this.shortenedUrls);\n        this.dataSource.paginator = this.paginator;\n      });\n  }\n\n  logOut(){\n    this.auth.signOut();\n  }\n\n  addNewUrl(){\n    this.api.addUrl(this.createUrlForm.value);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}